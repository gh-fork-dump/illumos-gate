.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\"
.\" Copyright (c) 2004, Sun Microsystems, Inc. All Rights Reserved
.\"
.Dd November 2, 2004
.Dt GETUSTACK 2
.Os
.Sh NAME
.Nm getustack, setustack
.Nd retrieve or change the address of per-LWP stack boundary information
.Sh SYNOPSIS
.In ucontext.h
.Ft int
.Fn getustack "stack_t **spp"
.Ft int
.Fn setustack "stack_t *sp"
.Sh DESCRIPTION
The
.Fn getustack
function retrieves the address of per-LWP stack boundary information.
The address is stored at the location pointed to by
.Fa spp .
If this address has not been defined using a previous call to
.Fn setustack , Dv NULL
is stored at the location pointed to by
.Fa spp .
.Pp
The
.Fn setustack
function changes the address of the current thread's stack boundary information
to the value of
.Fa sp .
.Sh RETURN VALUES
.Rv -std
.Sh ERRORS
The
.Fn getustack
and
.Fn setustack
functions may fail if:
.Bl -tag -width Er
.It Bq Er EFAULT
The
.Fa spp
or
.Fa sp
arguments do not refer to a valid address.
.El
.Sh USAGE
Only implementors of custom threading libraries should use these functions to
get and set the address of the stack bound to an internal per-thread data
structure.
Other users should use
.Xr stack_getbounds 3C
and
.Xr stack_setbounds 3C .
.Sh INTERFACE STABILITY
.Sy Evolving
.Sh MT-LEVEL
.Sy Async-Signal-Safe
.Sh SEE ALSO
.Xr _stack_grow 3C ,
.Xr stack_getbounds 3C ,
.Xr stack_inbounds 3C ,
.Xr stack_setbounds 3C ,
.Xr stack_violation 3C ,
.Xr attributes 5
