.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\"
.\" Copyright (c) 1997, Sun Microsystems, Inc. All Rights Reserved
.\"
.Dd May 12, 1997
.Dt RESOLVEPATH 2
.Os
.Sh NAME
.Nm resolvepath
.Nd resolve all symbolic links of a path name
.Sh SYNOPSIS
.In unistd.h
.Ft int
.Fn resolvepath "const char *path" "char *buf" "size_t bufsiz"
.Sh DESCRIPTION
The
.Fn resolvepath
function fully resolves all symbolic links in the path name
.Fa path
into a resulting path name free of symbolic links, and places
the resulting path name in the buffer
.Fa buf
which has size
.Fa bufsiz .
The resulting path name names the same file or directory as the original path
name.
All
.Dq \&.
components are eliminated and every non-leading
.Dq \&..
component is eliminated together with its preceding directory
component.
If leading
.Dq \&..
components reach to the root directory,
they are replaced by
.Dq / .
If the number of bytes in the resulting path
name is less than
.Fa bufsiz ,
the contents of the remainder of
.Fa buf
are unspecified.
.Sh RETURN VALUES
Upon successful completion,
.Fn resolvepath
function returns the number of bytes placed in the buffer;
otherwise it returns the value -1, leaves the buffer unchanged and sets the
global variable
.Va errno
to indicate the error.
.Sh ERRORS
The
.Fn resolvepath
function will fail if:
.Bl -tag -width Er
.It Bq Er EACCES
Search permission is denied for a component of the path prefix of
.Fa path
or for a path prefix component resulting from the resolution of a symbolic
link.
.It Bq Er EFAULT
The
.Fa path
or
.Fa buf
argument points to an illegal address.
.It Bq Er EIO
An I/O error occurred while reading from the file system.
.It Bq Er ENOENT
The
.Fa path
argument is an empty string or a component of
.Fa path
or a path name component produced by resolving a symbolic link does not name an
existing file.
.It Bq Er ELOOP
Too many symbolic links were encountered in resolving
.Fa path .
.It Bq Er ENAMETOOLONG
The length of  path  exceeds
.Dv PATH_MAX ,
or a path name component is longer than
.Dv NAME_MAX .
Path name resolution of a symbolic link produced an intermediate result whose
length exceeds
.Dv PATH_MAX
or a component whose length exceeds
.Dv NAME_MAX .
.It Bq Er ENOTDIR
A component of the path prefix of
.Fa path
or of a path prefix component resulting from the resolution of a symbolic link
is not a directory.
.El
.Sh USAGE
No more than
.Dv PATH_MAX
bytes will be placed in the buffer.
Applications should not assume that the returned contents of the buffer are
null-terminated.
.Sh SEE ALSO
.Xr readlink 2 ,
.Xr realpath 3C
