.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\"
.\" Copyright (c) 2003, Sun Microsystems, Inc. All Rights Reserved
.\" Copyright 1989 AT&T
.\"
.Dd January 20, 2003
.Dt ACCT 2
.Os
.Sh NAME
.Nm acct
.Nd enable or disable process accounting
.Sh SYNOPSIS
.In unistd.h
.Fn int
.Fa acct "const char *path"
.Sh DESCRIPTION
The
.Fn acct
function enables or disables the system process accounting
routine.
If the routine is enabled, an accounting record will be written in an
accounting file for each process that terminates.
The termination of a process can be caused by either an
.Xr exit 2
call or a
.Xr signal 3C .
The effective user ID of the process calling
.Fn acct
must have the appropriate privileges.
.Pp
The
.Fa path
argument points to the pathname of the accounting file, whose file format is
described in
.Xr acct.h 3HEAD .
.Pp
The accounting routine is enabled if
.Fa path
is non-zero and no errors occur during the function.
It is disabled if
.Fa path
is
.Po Vt "char *" Pc Ns Dv NULL
and no errors occur during the function.
.Sh RETURN VALUES
.Rv -std
.Sh ERRORS
The
.Fn acct
function will fail if:
.Bl -tag -width Er
.It Bq Er EACCES
The file named by
.Fa path
is not an ordinary file.
.It Bq Er EBUSY
An attempt is being made to enable accounting using the same file that is
currently being used.
.It Bq Er EFAULT
The
.Fa path
argument points to an illegal address.
.It Bq Er ELOOP
Too many symbolic links were encountered in translating
.Fa path .
.It Bq Er ENAMETOOLONG
The length of the
.Fa path
argument exceeds
.Brq Dv PATH_MAX ,
or the length of
.Fa path
exceeds
.Brq Dv NAME_MAX
while
.Dv _POSIX_NO_TRUNC
is in effect.
.It Bq Er ENOENT
One or more components of the accounting file pathname do not exist.
.It Bq Er ENOTDIR
A component of the path prefix is not a directory.
.It Bq Er EPERM
The
.Brq Dv PRIV_SYS_ACCT
privilege is not asserted in the effective set of the calling process.
.It Bq Er EROFS
The named file resides on a read-only file system.
.El
.Sh SEE ALSO
.Xr exit 2 ,
.Xr signal 3C ,
.Xr acct.h 3HEAD ,
.Xr privileges 5
