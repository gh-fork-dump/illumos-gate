.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\"
.\" Copyright 1989 AT&T
.\" Copyright (c) 1997, Sun Microsystems, Inc. All Rights Reserved
.\"
.Dd December 28, 1996
.Dt DUP 2
.Os
.Sh NAME
.Nm dup
.Nd duplicate an open file descriptor
.Sh SYNOPSIS
.In unistd.h
.Ft int
.Fn dup "int fildes"
.Sh DESCRIPTION
The
.Fn dup
function returns a new file descriptor having the following in
common with the original open file descriptor
.Fa fildes :
.Pp
.Bl -dash -compact
.It
Same open file (or pipe).
.It
Same file pointer (that is, both file descriptors share one file pointer).
.It
Same access mode (read, write or read/write).
.El
.Pp
The new file descriptor is set to remain open across
.Xr exec 2
functions
.Pq see Xr fcntl 2 .
The file descriptor returned is the lowest one available.
.Pp
The
.Fn dup fildes
function call is equivalent to:
.Pp
.Dl fcntl(fildes, F_DUPFD, 0);
.Sh RETURN VALUES
Upon successful completion, a non-negative integer representing the file
descriptor is returned; otherwise -1 is returned and the global variable
.Va errno
is set to indicate the error.
.Sh ERRORS
The
.Fn dup
function will fail if:
.Bl -tag -width Er
.It Bq Er EBADF
The
.Fa fildes
argument is not a valid open file descriptor.
.It Bq Er EINTR
A signal was caught during the execution of the
.Fn dup
function.
.It Bq Er EMFILE
The process has too many open files
.Pq see Xr getrlimit 2 .
.It Bq Er ENOLINK
The
.Fa fildes
argument is on a remote machine and the link to that machine is no longer
active.
.El
.Sh INTERFACE STABILITY
.Sy Standard
.Sh MT-LEVEL
.Sy Async-Signal-Safe
.Sh SEE ALSO
.Xr close 2 ,
.Xr creat 2 ,
.Xr exec 2 ,
.Xr fcntl 2 ,
.Xr getrlimit 2 ,
.Xr open 2 ,
.Xr pipe 2 ,
.Xr dup2 3C ,
.Xr lockf 3C ,
.Xr attributes 5 ,
.Xr standards 5
