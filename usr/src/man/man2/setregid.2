.\"
.\" The contents of this file are subject to the terms of the
.\" Common Development and Distribution License (the "License").
.\" You may not use this file except in compliance with the License.
.\"
.\" You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
.\" or http://www.opensolaris.org/os/licensing.
.\" See the License for the specific language governing permissions
.\" and limitations under the License.
.\"
.\" When distributing Covered Code, include this CDDL HEADER in each
.\" file and include the License file at usr/src/OPENSOLARIS.LICENSE.
.\" If applicable, add the following below this CDDL HEADER, with the
.\" fields enclosed by brackets "[]" replaced with your own identifying
.\" information: Portions Copyright [yyyy] [name of copyright owner]
.\"
.\"
.\" Copyright (c) 2004, Sun Microsystems, Inc. All Rights Reserved
.\"
.Dd March 22, 2004
.Dt SETREGID 2
.Os
.Sh NAME
.Nm setregid
.Nd set real and effective group IDs
.Sh SYNOPSIS
.In unistd.h
.Ft int
.Fn setregid "gid_t rgid" "gid_t egid"
.Sh DESCRIPTION
The
.Fn setregid
function is used to set the real and effective group IDs of the calling
process.
If
.Fa rgid
is -1, the real group ID is not changed; if
.Fa egid
is -1, the effective group ID is not changed.
The real and effective group IDs may be set to different values in the same
call.
.Pp
If the
.Brq Dv PRIV_PROC_SETID
privilege is asserted in the effective set of the calling process, the real
group ID and the effective group ID can be set to any legal value.
.Pp
If the
.Brq Dv PRIV_PROC_SETID
privilege is not asserted in the effective set of the calling process, either
the real group ID can be set to the saved set-group-ID from
.Xr execve 2 ,
or the effective group ID can either be set to the saved set-group-ID or the
real group ID.
.Pp
In either case, if the real group ID is being changed (that is, if
.Fa rgid
is not -1), or the effective group ID is being changed to a value not equal to
the real group ID, the saved set-group-ID is set equal to the new effective
group ID.
.Sh RETURN VALUES
Upon successful completion, 0 is returned; otherwise, -1 is returned, the
global variable
.Va errno
is set to indicate the error, and neither of the group IDs will be changed.
.Sh ERRORS
The
.Fn setregid
function will fail if:
.Bl -tag -width Er
.It Bq Er EINVAL
The value of
.Fa rgid
or
.Fa egid
is less than 0 or greater than
.Dv UID_MAX Pq defined in In limits.h .
.It Bq Er EPERM
The
.Brq Dv PRIV_PROC_SETID
privilege is not asserted in the effective set of
the calling processes and a change was specified other than changing the real
group ID to the saved set-group-ID or changing the effective group
ID to the real group ID or the saved group ID.
.El
.Sh USAGE
If a set-group-ID  process sets its effective group ID to its real group ID, it
can still set its effective group ID back to the saved set-group-ID.
.Sh INTERFACE STABILITY
.Sy Standard
.Sh SEE ALSO
.Xr execve 2 ,
.Xr getgid 2 ,
.Xr setreuid 2 ,
.Xr setuid 2 ,
.Xr attributes 5 ,
.Xr privileges 5 ,
.Xr standards 5
